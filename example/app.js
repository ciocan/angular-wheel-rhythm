var soundLib = [
	// from www.DrumSamples.org
		{
			'type': 'kick',
			'color': '#003333',
			'sounds': [
				'sounds/KickDrums1/kickdrum1.wav',
				'sounds/KickDrums1/kickdrum2.wav',
				'sounds/KickDrums1/kickdrum3.wav',
				'sounds/KickDrums1/kickdrum4.wav',
				'sounds/KickDrums1/kickdrum5.wav',
				'sounds/KickDrums1/kickdrum6.wav',
				'sounds/KickDrums1/kickdrum7.wav',
				'sounds/KickDrums1/kickdrum8.wav',
				'sounds/KickDrums1/kickdrum9.wav',
				'sounds/KickDrums1/kickdrum10.wav',
				]
		},
		{
			'type': 'bass',
			'color': '#3399CC',
			'sounds': [
				'sounds/BassDrums1/bassdrum1.wav',
				'sounds/BassDrums1/bassdrum2.wav',
				'sounds/BassDrums1/bassdrum3.wav',
				'sounds/BassDrums1/bassdrum4.wav',
				'sounds/BassDrums1/bassdrum5.wav',
				'sounds/BassDrums1/bassdrum6.wav',
				'sounds/BassDrums1/bassdrum7.wav',
				'sounds/BassDrums1/bassdrum8.wav',
				'sounds/BassDrums1/bassdrum9.wav',
				'sounds/BassDrums1/bassdrum10.wav',
			]
		},
		{
			'type': 'kettle',
			'color': '#3366CC',
			'sounds': [
				'sounds/KettleDrums/kettledrum1.wav',
				'sounds/KettleDrums/kettledrum2.wav',
				'sounds/KettleDrums/kettledrum3.wav',
				'sounds/KettleDrums/kettledrum4.wav',
				'sounds/KettleDrums/kettledrum5.wav',
				'sounds/KettleDrums/kettledrum6.wav',
				'sounds/KettleDrums/kettledrum7.wav',
				'sounds/KettleDrums/kettledrum8.wav',
				'sounds/KettleDrums/kettledrum9.wav',
				'sounds/KettleDrums/kettledrum10.wav',
			]
		},		
		{
			'type': 'tomtom',
			'color': '#0000FF',
			'sounds': [
				'sounds/TomTomDrums/tomtomdrum1.wav',
				'sounds/TomTomDrums/tomtomdrum2.wav',
				'sounds/TomTomDrums/tomtomdrum3.wav',
				'sounds/TomTomDrums/tomtomdrum4.wav',
				'sounds/TomTomDrums/tomtomdrum5.wav',
				'sounds/TomTomDrums/tomtomdrum6.wav',
				'sounds/TomTomDrums/tomtomdrum7.wav',
				'sounds/TomTomDrums/tomtomdrum8.wav',
				'sounds/TomTomDrums/tomtomdrum9.wav',
				'sounds/TomTomDrums/tomtomdrum10.wav'				
			]
		},


		{
			'type': 'snare',
			'color': '#9966CC',
			'sounds': [
				'sounds/SnareDrums1/snaredrum1.wav',
				'sounds/SnareDrums1/snaredrum2.wav',
				'sounds/SnareDrums1/snaredrum3.wav',
				'sounds/SnareDrums1/snaredrum4.wav',
				'sounds/SnareDrums1/snaredrum5.wav',
				'sounds/SnareDrums1/snaredrum6.wav',
				'sounds/SnareDrums1/snaredrum7.wav',
				'sounds/SnareDrums1/snaredrum8.wav',
				'sounds/SnareDrums1/snaredrum9.wav',
				'sounds/SnareDrums1/snaredrum10.wav',
			]
		},
		{
			'type': 'hihat',
			'color': '#663399',
			'sounds': [
				'sounds/HiHats1/hihat1.wav',
				'sounds/HiHats1/hihat2.wav',
				'sounds/HiHats1/hihat3.wav',
				'sounds/HiHats1/hihat4.wav',
				'sounds/HiHats1/hihat5.wav',
				'sounds/HiHats1/hihat6.wav',
				'sounds/HiHats1/hihat7.wav',
				'sounds/HiHats1/hihat8.wav',
				'sounds/HiHats1/hihat9.wav',
				'sounds/HiHats1/hihat10.wav',
			]
		},
		{
			'type': 'cymbal',
			'color': '#330066',
			'sounds': [
				'sounds/Cymbals1/cymbal1.wav',
				'sounds/Cymbals1/cymbal2.wav',
				'sounds/Cymbals1/cymbal3.wav',
				'sounds/Cymbals1/cymbal4.wav',
				'sounds/Cymbals1/cymbal5.wav',
				'sounds/Cymbals1/cymbal6.wav',
				'sounds/Cymbals1/cymbal7.wav',
				'sounds/Cymbals1/cymbal8.wav',
				'sounds/Cymbals1/cymbal9.wav',
				'sounds/Cymbals1/cymbal10.wav',
			]
		},
		{
			'type': 'tambourine',
			'color': '#9900CC',
			'sounds': [
				'sounds/Tambourines/tambourine1.wav',
				'sounds/Tambourines/tambourine2.wav',
				'sounds/Tambourines/tambourine3.wav',
				'sounds/Tambourines/tambourine4.wav',
				'sounds/Tambourines/tambourine5.wav',
				'sounds/Tambourines/tambourine6.wav',
				'sounds/Tambourines/tambourine7.wav',
				'sounds/Tambourines/tambourine8.wav',
				'sounds/Tambourines/tambourine9.wav',
				'sounds/Tambourines/tambourine10.wav'
			]
		},


		{
			'type': 'bongo',
			'color': '#00CC33',
			'sounds': [
				'sounds/Bongos/bongo1.wav',
				'sounds/Bongos/bongo2.wav',
				'sounds/Bongos/bongo3.wav',
				'sounds/Bongos/bongo4.wav',
				'sounds/Bongos/bongo5.wav',
				'sounds/Bongos/bongo6.wav',
				'sounds/Bongos/bongo7.wav',
				'sounds/Bongos/bongo8.wav',
				'sounds/Bongos/bongo9.wav',
				'sounds/Bongos/bongo10.wav'				
			]
		},
		{
			'type': 'conga',
			'color': '#339966',
			'sounds': [
				'sounds/Congas/conga1.wav',
				'sounds/Congas/conga2.wav',
				'sounds/Congas/conga3.wav',
				'sounds/Congas/conga4.wav',
				'sounds/Congas/conga5.wav',
				'sounds/Congas/conga6.wav',
				'sounds/Congas/conga7.wav',
				'sounds/Congas/conga8.wav',
				'sounds/Congas/conga9.wav',
				'sounds/Congas/conga10.wav'
			]
		},		
		{
			'type': 'cowbell',
			'color': '#66CC99',
			'sounds': [
				'sounds/Cowbells/cowbell1.wav',
				'sounds/Cowbells/cowbell2.wav',
				'sounds/Cowbells/cowbell3.wav',
				'sounds/Cowbells/cowbell4.wav',
				'sounds/Cowbells/cowbell5.wav',
				'sounds/Cowbells/cowbell6.wav',
				'sounds/Cowbells/cowbell7.wav',
				'sounds/Cowbells/cowbell8.wav',
				'sounds/Cowbells/cowbell9.wav',
				'sounds/Cowbells/cowbell10.wav'
			]
		},
		{
			'type': 'rattle',
			'color': '#FF6600',
			'sounds': [
				'sounds/Rattles/rattle1.wav',
				'sounds/Rattles/rattle2.wav',
				'sounds/Rattles/rattle3.wav',
				'sounds/Rattles/rattle4.wav',
				'sounds/Rattles/rattle5.wav',
				'sounds/Rattles/rattle6.wav',
				'sounds/Rattles/rattle7.wav',
				'sounds/Rattles/rattle8.wav',
				'sounds/Rattles/rattle9.wav',
				'sounds/Rattles/rattle10.wav'				
			]
		},
		{
			'type': 'triangle',
			'color': '#FF3300',
			'sounds': [
				'sounds/Triangles/triangle1.wav',
				'sounds/Triangles/triangle2.wav',
				'sounds/Triangles/triangle3.wav',
				'sounds/Triangles/triangle4.wav',
				'sounds/Triangles/triangle5.wav',
				'sounds/Triangles/triangle6.wav',
				'sounds/Triangles/triangle7.wav',
				'sounds/Triangles/triangle8.wav',
				'sounds/Triangles/triangle9.wav',
				'sounds/Triangles/triangle10.wav'
			]
		},
	];


var app = angular.module('app',['wheelRhythm']);

app.controller('MainCtrl', ['$scope', 'WheelSound', function($scope, WheelSound){
	$scope.soundLib = soundLib;	
	$scope.activeSound = {};
	$scope.activeRhythm = 2;

	WheelSound.setSoundLib(soundLib);

	$scope.rhythms = [
		{
			name: "Funky",
			tempo: 30,
			wheels:[
				[{type: 'hihat', active:5, angle: 0},{type: 'hihat', active:5, angle: 45},{type: 'hihat', active:5, angle: 90},{type: 'hihat', active:5, angle: 135}, {type: 'hihat', active:5, angle: 180},{type: 'hihat', active:5, angle: 225},{type: 'hihat', active:5, angle: -89},{type: 'hihat', active:5, angle: 315}],
				[{type: 'snare', active:3, angle: 90}, {type:'snare', active:3, angle: -89}],
				[{type: 'kick', active:4, angle: 0}, {type:'kick', active:4, angle: 67.5}, {type:'kick', active:4, angle: 135}, {type:'kick', active:4, angle: 225}]
			]
		},
		{
			name: "Rock",
			tempo: 30,
			wheels: [
				[{type: 'hihat', active:5, angle: 0},{type: 'hihat', active:5, angle: 45},{type: 'hihat', active:5, angle: 90},{type: 'hihat', active:5, angle: 135}, {type: 'hihat', active:5, angle: 180},{type: 'hihat', active:5, angle: 225},{type: 'hihat', active:5, angle: -89},{type: 'hihat', active:5, angle: 315}],
				[{type: 'snare', active:3, angle: 90}, {type:'snare', active:3, angle: -89}],
				[{type: 'kick', active:4, angle: 0}, {type:'kick', active:4, angle: 135}, {type:'kick', active:4, angle: 180}]
			]
		},
		{
			name: "Dance",
			tempo: 30,
			wheels: [
				[{type: 'hihat', active:5, angle: 45},{type: 'hihat', active:5, angle: 135},{type: 'hihat', active:5, angle: 225},{type: 'hihat', active:5, angle: 315}, {type: 'hihat', active:5, angle: 337.5}],
				[{type: 'snare', active:3, angle: 90}, {type:'snare', active:3, angle: -89}],
				[{type: 'bass', active:8, angle: 0}, {type:'bass', active:8, angle: 90}, {type:'bass', active:8, angle: 180}, {type:'bass', active:8, angle: -89}]
			]
		}
	];

	$scope.$watch('rhythms', function(newRhythms) {
	});

	$scope.selectRhythm = function(index) {
		$scope.activeRhythm = index;
	}
	

	$scope.isActive = function(sound, url) {
		if($scope.activeSound.hasOwnProperty('sounds'))
		return $scope.activeSound.sounds[$scope.activeSound.active] == url;
	}

	$scope.select = function(sound, index) {
		new Audio(sound.sounds[index]).play();
		$scope.activeSound = sound;
		$scope.activeSound.active = index;
		WheelSound.set($scope.activeSound);
	}


	$scope.updateExport = function() {
		var exportContent = $scope.rhythms[$scope.activeRhythm];
		delete exportContent.$$hashKey;
		return JSON.stringify(exportContent, null, '');		
	}

	$scope.showExported = false;
	$scope.exportLabel = 'Export';

	$scope.export = function() {
		$scope.showExported = !$scope.showExported;
		if($scope.showExported) {
			$scope.exportLabel = 'Close';
		} else {
			$scope.exportLabel = 'Export';
		}
	}

}]);

